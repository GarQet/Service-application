<aura:component controller="LastThreeCasesController" implements="force:appHostable,flexipage:availableForAllPageTypes">
	<aura:attribute name="currentUser" type="User"/>
    <force:recordData aura:id="recordLoader" recordId="{!$SObjectType.CurrentUser.Id}" fields="Name" targetFields="{!v.currentUser}"/>
    
    <aura:attribute name="ownerOfCases" type="Case[]"/>
    <aura:attribute name="loaded" type="Boolean" default="true"/>
    <aura:attribute name="limitOfRecords" type="Integer" default="3"/>
    <aura:handler name="init" value="{!this}" action="{!c.getUserCases}"/>
    
    <lightning:card title="Cases You are working on">
		<div style="padding-left: 12px; padding-right: 12px; font-size: 13px;">
            <aura:if isTrue="{!v.loaded}">
                Loaded three latest cases You are working on:<br></br>
                <aura:iteration var="case" items="{!v.ownerOfCases}">
                    <div id="{!case.Id}" onclick="{!c.gotoRecord}">
                    	<h1 style="font-size: 14px; padding-top: 12px; font-weight: bold;">Number: {!case.CaseNumber}</h1>
                    </div>
                    Description: 
                    	<ui:outputText value="{!case.Description}"/><br></br>
                    Status: 
                    	<ui:outputText value="{!case.Status}"/><br></br>
                    Created: 
                    	<lightning:formattedDateTime value="{!case.CreatedDate}"
                        	year="numeric" month="numeric" day="numeric"
                            hour="2-digit" minute="2-digit" hour12="false"/>
				</aura:iteration><br></br><br></br><br></br>
                <div style="position: absolute; bottom: 12px; right: 12px;">
                	<lightning:button label="Hide records" class="slds-m-top_medium" variant="brand" onclick="{!c.hideRecords}"/>
                </div>
            <aura:set attribute="else">
                Load the three latest cases.<br></br>
                <lightning:button label="Load records" class="slds-m-top_medium" variant="brand" onclick="{!c.getUserCases}"/>
            </aura:set>
            </aura:if>
        </div>
    </lightning:card>
</aura:component>